From cd0dedacf13abdb276da8375d0b41cb7f2c73f7b Mon Sep 17 00:00:00 2001
From: Chris Rummel <crummel@microsoft.com>
Date: Tue, 23 Jul 2019 12:57:21 -0500
Subject: [PATCH 5/6] Exclude test projects from source-build.

---
 TestAssets/Directory.Build.props                               | 3 +++
 .../dotnet-dependency-context-test.csproj                      | 1 +
 test/Directory.Build.props                                     | 1 +
 3 files changed, 5 insertions(+)

diff --git a/TestAssets/Directory.Build.props b/TestAssets/Directory.Build.props
index 905549edc..66cbf3614 100644
--- a/TestAssets/Directory.Build.props
+++ b/TestAssets/Directory.Build.props
@@ -1,3 +1,6 @@
 <Project>
   <!-- Empty Directory.Build.props file to prevent test asset projects from picking up the repo's Directory.Build.props' -->
+  <PropertyGroup>
+    <ExcludeFromSourceBuild>true</ExcludeFromSourceBuild>
+  </PropertyGroup>
 </Project>
diff --git a/TestAssets/TestPackages/dotnet-dependency-context-test/dotnet-dependency-context-test.csproj b/TestAssets/TestPackages/dotnet-dependency-context-test/dotnet-dependency-context-test.csproj
index efbfd90a3..2fa32cec8 100644
--- a/TestAssets/TestPackages/dotnet-dependency-context-test/dotnet-dependency-context-test.csproj
+++ b/TestAssets/TestPackages/dotnet-dependency-context-test/dotnet-dependency-context-test.csproj
@@ -6,6 +6,7 @@
     <!-- netcoreapp2.2 is the maximum TFM project tools support -->
     <TargetFramework>netcoreapp2.2</TargetFramework>
     <OutputType>Exe</OutputType>
+    <ExcludeFromSourceBuild>true</ExcludeFromSourceBuild>
   </PropertyGroup>
 
   <ItemGroup>
diff --git a/test/Directory.Build.props b/test/Directory.Build.props
index 406c4f8c1..b8995f951 100644
--- a/test/Directory.Build.props
+++ b/test/Directory.Build.props
@@ -3,5 +3,6 @@
 
   <PropertyGroup>
     <DisableImplicitFrameworkReferences>false</DisableImplicitFrameworkReferences>
+    <ExcludeFromSourceBuild>true</ExcludeFromSourceBuild>
   </PropertyGroup>
 </Project>
-- 
2.18.0

