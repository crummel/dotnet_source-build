From 0b14ab5648d746e002d6c6b9c59fbcdd4f9253b8 Mon Sep 17 00:00:00 2001
From: Sven Boemer <sbomer@gmail.com>
Date: Fri, 24 Apr 2020 11:17:25 -0700
Subject: [PATCH 14/15] Pick up renamed Microsoft.NET.ILLink.Tasks package
 (#35214)

---
 eng/Version.Details.xml                                     | 4 ++--
 eng/Versions.props                                          | 2 +-
 eng/illink.targets                                          | 6 +++---
 .../CreateRuntimeRootILLinkDescriptorFile.targets           | 2 +-
 4 files changed, 7 insertions(+), 7 deletions(-)

diff --git a/eng/Version.Details.xml b/eng/Version.Details.xml
index 9429dea219b..d5e61095b96 100644
--- a/eng/Version.Details.xml
+++ b/eng/Version.Details.xml
@@ -170,9 +170,9 @@
       <Uri>https://github.com/dotnet/runtime</Uri>
       <Sha>0375524a91a47ca4db3ee1be548f74bab7e26e76</Sha>
     </Dependency>
-    <Dependency Name="ILLink.Tasks" Version="5.0.0-preview.3.20210.1">
+    <Dependency Name="Microsoft.NET.ILLink.Tasks" Version="5.0.0-preview.3.20220.1">
       <Uri>https://github.com/mono/linker</Uri>
-      <Sha>8caef57d1f3bc7a188e5dd26d43a2d34151223f9</Sha>
+      <Sha>7573e99c7665f565fe4a6ac4784d5c641213d5e1</Sha>
     </Dependency>
     <Dependency Name="Microsoft.DotNet.XHarness.Tests.Runners" Version="1.0.0-prerelease.20214.2">
       <Uri>https://github.com/dotnet/xharness</Uri>
diff --git a/eng/Versions.props b/eng/Versions.props
index eb866a69686..f5e397adda1 100644
--- a/eng/Versions.props
+++ b/eng/Versions.props
@@ -123,7 +123,7 @@
     <!-- Docs -->
     <MicrosoftPrivateIntellisenseVersion>3.1.0-preview-20200129.1</MicrosoftPrivateIntellisenseVersion>
     <!-- ILLink -->
-    <ILLinkTasksVersion>5.0.0-preview.3.20210.1</ILLinkTasksVersion>
+    <MicrosoftNETILLinkTasksVersion>5.0.0-preview.3.20220.1</MicrosoftNETILLinkTasksVersion>
     <!-- Mono LLVM -->
     <runtimelinuxx64MicrosoftNETCoreRuntimeMonoLLVMSdkVersion>6.0.1-alpha.1.20206.1</runtimelinuxx64MicrosoftNETCoreRuntimeMonoLLVMSdkVersion>
     <runtimelinuxx64MicrosoftNETCoreRuntimeMonoLLVMToolsVersion>6.0.1-alpha.1.20206.1</runtimelinuxx64MicrosoftNETCoreRuntimeMonoLLVMToolsVersion>
diff --git a/eng/illink.targets b/eng/illink.targets
index cecc5c2a5a3..ac7db3b9095 100644
--- a/eng/illink.targets
+++ b/eng/illink.targets
@@ -8,8 +8,8 @@
   </PropertyGroup>
 
   <ItemGroup>
-    <PackageReference Include="illink.tasks"
-                      Version="$(ILLinkTasksVersion)"
+    <PackageReference Include="Microsoft.NET.ILLink.Tasks"
+                      Version="$(MicrosoftNETILLinkTasksVersion)"
                       PrivateAssets="all"
                       IsImplicitlyDefined="true"
                       ExcludeAssets="build"
@@ -18,7 +18,7 @@
 
   <!-- Inputs and outputs of ILLinkTrimAssembly -->
   <PropertyGroup>
-    <ILLinkTasksDir>$([MSBuild]::NormalizeDirectory('$(PkgILLink_Tasks)', 'tools'))</ILLinkTasksDir>
+    <ILLinkTasksDir>$([MSBuild]::NormalizeDirectory('$(PkgMicrosoft_NET_ILLink_Tasks)', 'tools'))</ILLinkTasksDir>
     <ILLinkTasksPath Condition="'$(ILLinkTasksPath)' == '' and '$(MSBuildRuntimeType)' == 'core'">$(ILLinkTasksDir)netcoreapp3.0/ILLink.Tasks.dll</ILLinkTasksPath>
     <ILLinkTasksPath Condition="'$(ILLinkTasksPath)' == '' and '$(MSBuildRuntimeType)' != 'core'">$(ILLinkTasksDir)$(NetFrameworkCurrent)/ILLink.Tasks.dll</ILLinkTasksPath>
     <ILLinkTrimAssemblyPath>$(IntermediateOutputPath)$(TargetName)$(TargetExt)</ILLinkTrimAssemblyPath>
diff --git a/src/coreclr/src/System.Private.CoreLib/CreateRuntimeRootILLinkDescriptorFile.targets b/src/coreclr/src/System.Private.CoreLib/CreateRuntimeRootILLinkDescriptorFile.targets
index d06367c480c..a40473eb98a 100644
--- a/src/coreclr/src/System.Private.CoreLib/CreateRuntimeRootILLinkDescriptorFile.targets
+++ b/src/coreclr/src/System.Private.CoreLib/CreateRuntimeRootILLinkDescriptorFile.targets
@@ -11,7 +11,7 @@
     <_CortypeFilePath Condition=" '$(_CortypeFilePath)' == '' ">$(MSBuildThisFileDirectory)..\inc\cortypeinfo.h</_CortypeFilePath>
     <_RexcepFilePath Condition=" '$(_RexcepFilePath)' == '' ">$(MSBuildThisFileDirectory)..\vm\rexcep.h</_RexcepFilePath>
     <_ILLinkTrimXmlFilePath Condition=" '$(_ILLinkTrimXmlFilePath)' == '' ">$(MSBuildThisFileDirectory)ILLinkTrim.xml</_ILLinkTrimXmlFilePath>
-    <_ILLinkTasksToolsDir>$(PkgILLink_Tasks)/tools</_ILLinkTasksToolsDir>
+    <_ILLinkTasksToolsDir>$(PkgMicrosoft_NET_ILLink_Tasks)/tools</_ILLinkTasksToolsDir>
     <_ILLinkTasksDir>$(_ILLinkTasksToolsDir)/$(NetFrameworkCurrent)/</_ILLinkTasksDir>
     <_ILLinkTasksDir Condition="'$(MSBuildRuntimeType)' == 'Core'">$(_ILLinkTasksToolsDir)/netcoreapp3.0/</_ILLinkTasksDir>
   </PropertyGroup>
-- 
2.17.1

